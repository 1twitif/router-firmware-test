<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">



	<title>Gargoyle Router Management Utility</title>
	
	
	<script language="javascript" type="text/javascript" src="common.js"></script>
	<script language="javascript" type="text/javascript" src="table.js"></script>
	<script language="javascript" type="text/javascript" src="dhcp.js"></script>

<link rel="stylesheet" type="text/css" href="dhcp.css" media="all">
</head><body>
	<div id="darken"><iframe src="dhcp_1.html" id="d_iframe" class="select_free"></iframe></div>
	<div id="wait_msg">
		<div id="wait_txt">
			Please Wait While Settings Are Applied
		</div>
		<div id="wait_icon">
			<img src="wait_icon.gif">
		</div>
		<iframe src="dhcp_2.html" id="m_iframe" class="select_free"></iframe>
	</div>
	<div id="outer_logo">
		<div id="inner_logo">
			<div id="garg_title">Gargoyle</div>
			<div id="garg_desc">Router<br>Management<br>Utility</div>
			<div id="garg_host">Device Name: Gargoyle</div>
		</div>
	</div>
	<div id="outer_header"></div>
	<div id="outer_container">
		<div id="main_external_container">
			<div id="main_top"></div>
			<div id="main_internal_container">


<script>
<!--
	var gargoyleBinRoot = "/www/.";
	var uciOriginal = new UCIContainer();
	uciOriginal.set('network', 'loopback', '', "interface");
	uciOriginal.set('network', 'loopback', 'ifname', "lo");
	uciOriginal.set('network', 'loopback', 'proto', "static");
	uciOriginal.set('network', 'loopback', 'ipaddr', "127.0.0.1");
	uciOriginal.set('network', 'loopback', 'netmask', "255.0.0.0");
	uciOriginal.set('network', 'lan', '', "interface");
	uciOriginal.set('network', 'lan', 'ifname', "eth0");
	uciOriginal.set('network', 'lan', 'type', "bridge");
	uciOriginal.set('network', 'lan', 'proto', "static");
	uciOriginal.set('network', 'lan', 'ipaddr', "192.168.1.1");
	uciOriginal.set('network', 'lan', 'netmask', "255.255.255.0");
	uciOriginal.set('network', 'wan', '', "interface");
	uciOriginal.set('network', 'wan', 'ifname', "eth1");
	uciOriginal.set('network', 'wan', 'proto', "dhcp");
	uciOriginal.set('network', 'cfg05cf9e', '', "switch");
	uciOriginal.set('network', 'cfg05cf9e', 'name', "rtl8366s");
	uciOriginal.set('network', 'cfg05cf9e', 'reset', "1");
	uciOriginal.set('network', 'cfg05cf9e', 'enable_vlan', "1");
	uciOriginal.set('network', 'cfg05cf9e', 'blinkrate', "2");
	uciOriginal.set('network', 'cfg076768', '', "switch_vlan");
	uciOriginal.set('network', 'cfg076768', 'device', "rtl8366s");
	uciOriginal.set('network', 'cfg076768', 'vlan', "1");
	uciOriginal.set('network', 'cfg076768', 'ports', "0 1 2 3 5");
	uciOriginal.set('network', 'cfg092a6b', '', "switch_port");
	uciOriginal.set('network', 'cfg092a6b', 'device', "rtl8366s");
	uciOriginal.set('network', 'cfg092a6b', 'port', "1");
	uciOriginal.set('network', 'cfg092a6b', 'led', "9");
	uciOriginal.set('network', 'cfg0b42e9', '', "switch_port");
	uciOriginal.set('network', 'cfg0b42e9', 'device', "rtl8366s");
	uciOriginal.set('network', 'cfg0b42e9', 'port', "2");
	uciOriginal.set('network', 'cfg0b42e9', 'led', "6");
	uciOriginal.set('network', 'cfg0d8c6c', '', "switch_port");
	uciOriginal.set('network', 'cfg0d8c6c', 'device', "rtl8366s");
	uciOriginal.set('network', 'cfg0d8c6c', 'port', "5");
	uciOriginal.set('network', 'cfg0d8c6c', 'led', "6");
	uciOriginal.set('wireless', 'radio0', '', "wifi-device");
	uciOriginal.set('wireless', 'radio0', 'type', "mac80211");
	uciOriginal.set('wireless', 'radio0', 'channel', "11");
	uciOriginal.set('wireless', 'radio0', 'macaddr', "30:46:9a:0b:88:35");
	uciOriginal.set('wireless', 'radio0', 'hwmode', "11ng");
	uciOriginal.set('wireless', 'radio0', 'htmode', "HT20");
	uciOriginal.set('wireless', 'radio0', 'ht_capab', "SHORT-GI-40 TX-STBC RX-STBC1 DSSS_CCK-40");
	uciOriginal.set('wireless', 'radio0', 'disabled', "1");
	uciOriginal.set('wireless', 'cfg035040', '', "wifi-iface");
	uciOriginal.set('wireless', 'cfg035040', 'device', "radio0");
	uciOriginal.set('wireless', 'cfg035040', 'network', "lan");
	uciOriginal.set('wireless', 'cfg035040', 'mode', "ap");
	uciOriginal.set('wireless', 'cfg035040', 'ssid', "OpenWrt");
	uciOriginal.set('wireless', 'cfg035040', 'encryption', "none");
	uciOriginal.set('wireless', 'radio1', '', "wifi-device");
	uciOriginal.set('wireless', 'radio1', 'type', "mac80211");
	uciOriginal.set('wireless', 'radio1', 'channel', "36");
	uciOriginal.set('wireless', 'radio1', 'macaddr', "30:46:9a:0b:88:37");
	uciOriginal.set('wireless', 'radio1', 'hwmode', "11na");
	uciOriginal.set('wireless', 'radio1', 'htmode', "HT20");
	uciOriginal.set('wireless', 'radio1', 'ht_capab', "SHORT-GI-40 TX-STBC RX-STBC1 DSSS_CCK-40");
	uciOriginal.set('wireless', 'radio1', 'disabled', "1");
	uciOriginal.set('wireless', 'cfg062561', '', "wifi-iface");
	uciOriginal.set('wireless', 'cfg062561', 'device', "radio1");
	uciOriginal.set('wireless', 'cfg062561', 'network', "lan");
	uciOriginal.set('wireless', 'cfg062561', 'mode', "ap");
	uciOriginal.set('wireless', 'cfg062561', 'ssid', "OpenWrt");
	uciOriginal.set('wireless', 'cfg062561', 'encryption', "none");
	uciOriginal.set('dhcp', 'cfg024c78', '', "dnsmasq");
	uciOriginal.set('dhcp', 'cfg024c78', 'domainneeded', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'boguspriv', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'filterwin2k', "0");
	uciOriginal.set('dhcp', 'cfg024c78', 'localise_queries', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'rebind_protection', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'rebind_localhost', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'local', "/lan/");
	uciOriginal.set('dhcp', 'cfg024c78', 'domain', "lan");
	uciOriginal.set('dhcp', 'cfg024c78', 'expandhosts', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'nonegcache', "0");
	uciOriginal.set('dhcp', 'cfg024c78', 'authoritative', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'readethers', "1");
	uciOriginal.set('dhcp', 'cfg024c78', 'leasefile', "/tmp/dhcp.leases");
	uciOriginal.set('dhcp', 'cfg024c78', 'resolvfile', "/tmp/resolv.conf.auto");
	uciOriginal.set('dhcp', 'lan', '', "dhcp");
	uciOriginal.set('dhcp', 'lan', 'interface', "lan");
	uciOriginal.set('dhcp', 'lan', 'start', "100");
	uciOriginal.set('dhcp', 'lan', 'limit', "150");
	uciOriginal.set('dhcp', 'lan', 'leasetime', "12h");
	uciOriginal.set('dhcp', 'wan', '', "dhcp");
	uciOriginal.set('dhcp', 'wan', 'interface', "wan");
	uciOriginal.set('dhcp', 'wan', 'ignore', "1");
	uciOriginal.set('firewall', 'cfg02f50e', '', "defaults");
	uciOriginal.set('firewall', 'cfg02f50e', 'syn_flood', "1");
	uciOriginal.set('firewall', 'cfg02f50e', 'input', "ACCEPT");
	uciOriginal.set('firewall', 'cfg02f50e', 'output', "ACCEPT");
	uciOriginal.set('firewall', 'cfg02f50e', 'forward', "REJECT");
	uciOriginal.set('firewall', 'cfg04e8f0', '', "zone");
	uciOriginal.set('firewall', 'cfg04e8f0', 'name', "lan");
	uciOriginal.set('firewall', 'cfg04e8f0', 'input', "ACCEPT");
	uciOriginal.set('firewall', 'cfg04e8f0', 'output', "ACCEPT");
	uciOriginal.set('firewall', 'cfg04e8f0', 'forward', "REJECT");
	uciOriginal.set('firewall', 'cfg062fd8', '', "zone");
	uciOriginal.set('firewall', 'cfg062fd8', 'name', "wan");
	uciOriginal.set('firewall', 'cfg062fd8', 'input', "REJECT");
	uciOriginal.set('firewall', 'cfg062fd8', 'output', "ACCEPT");
	uciOriginal.set('firewall', 'cfg062fd8', 'forward', "REJECT");
	uciOriginal.set('firewall', 'cfg062fd8', 'masq', "1");
	uciOriginal.set('firewall', 'cfg062fd8', 'mtu_fix', "1");
	uciOriginal.set('firewall', 'cfg087a91', '', "forwarding");
	uciOriginal.set('firewall', 'cfg087a91', 'src', "lan");
	uciOriginal.set('firewall', 'cfg087a91', 'dest', "wan");
	uciOriginal.set('firewall', 'cfg0a0261', '', "rule");
	uciOriginal.set('firewall', 'cfg0a0261', 'src', "wan");
	uciOriginal.set('firewall', 'cfg0a0261', 'proto', "udp");
	uciOriginal.set('firewall', 'cfg0a0261', 'dest_port', "68");
	uciOriginal.set('firewall', 'cfg0a0261', 'target', "ACCEPT");
	uciOriginal.set('firewall', 'cfg0c0a5e', '', "rule");
	uciOriginal.set('firewall', 'cfg0c0a5e', 'src', "wan");
	uciOriginal.set('firewall', 'cfg0c0a5e', 'proto', "icmp");
	uciOriginal.set('firewall', 'cfg0c0a5e', 'icmp_type', "echo-request");
	uciOriginal.set('firewall', 'cfg0c0a5e', 'target', "ACCEPT");
	uciOriginal.set('firewall', 'cfg0e2df3', '', "include");
	uciOriginal.set('firewall', 'cfg0e2df3', 'path', "/etc/firewall.user");
	uciOriginal.set('firewall', 'cfg10536b', '', "include");
	uciOriginal.set('firewall', 'cfg10536b', 'path', "/usr/lib/gargoyle_firewall_util/gargoyle_additions.firewall");

	setBrowserTimeCookie();

	var testAjax = getRequestObj();
	if(!testAjax) { window.location = "no_ajax.sh"; }
//-->
</script>




<script>
<!--
var dhcpEnabled = true;
var subnet="192.168.1.";
var dhcpSection = getDhcpSection(uciOriginal);
var hostData = new Array();
hostData.push(["127.0.0.1","localhost."]);
hostData.push(["192.168.1.1","Gargoyle"]);

var etherData = new Array();

var leaseData = new Array();


var ipHostHash = new Array();
for (hostIndex in hostData)
{
	host=hostData[hostIndex];
	ipHostHash[ host[0] ] = host[1];
}

var staticIpTableData = new Array();
for (etherIndex in etherData)
{
	ether=etherData[etherIndex];
	mac=ether[0].toLowerCase();
	ip=ether[1];
	host= ipHostHash[ip] == null ? '-' : ipHostHash[ip];
	staticIpTableData.push([host, mac, ip]);
}

//-->
</script>


<form action="http://192.168.1.1/dhcp.sh">
	<fieldset>
		<legend class="sectionheader">DHCP</legend>


		<div id="dhcp_enabled_container">
			<div class="nocolumn">
				<input checked="checked" id="dhcp_enabled" onclick="setEnabled(this.checked)" type="checkbox">
				<label id="dhcp_enabled_label" for="dhcp_enabled">LAN DHCP Server Enabled</label>
			</div>
		</div>


		<div id="dhcp_range_container">
			<label class="nocolumn" for="dhcp_start">DHCP range:</label>
		</div>
		<div id="dhcp_start_container" class="indent">
			<label class="leftcolumn" for="dhcp_start" id="dhcp_start_label">Start:</label>
			<span class="rightcolumn">192.168.1.</span>
			<input value="100" style="color: rgb(0, 0, 0);" class="" id="dhcp_start" onkeyup="proofreadNumeric(this)" size="5" maxlength="3" type="text">
		</div>
		<div id="dhcp_end_container" class="indent">
			<label class="leftcolumn" for="dhcp_end" id="dhcp_end_label">End:</label>
			<span class="rightcolumn">192.168.1.</span>
			<input value="250" style="color: rgb(0, 0, 0);" class="" id="dhcp_end" onkeyup="proofreadNumeric(this)" size="5" maxlength="3" type="text">
		</div>
		<div id="dhcp_lease_container">
			<label class="leftcolumn" for="dhcp_lease" id="dhcp_lease_label">Lease Time:</label>
			<input value="12" style="color: rgb(0, 0, 0);" class="" onkeyup="proofreadNumeric(this)" id="dhcp_lease" size="5" maxlength="4" type="text">
			<em>(hours)</em>
		</div>

	</fieldset>

	<fieldset>
		<legend class="sectionheader">Static IPs</legend>

		<div id="block_mismatches_container">
			<div class="nocolumn">
				<input id="block_mismatches" type="checkbox">
				<label id="block_mismatch_label" for="block_mismatches">Block MAC addresses assigned a static IP that connect from a different IP</label>
			</div>
		</div>

		<div id="staticip_add_heading_container">
			<label class="nocolumn" id="staticip_add_heading_label" style="text-decoration: underline;">Add Static IP Address:</label>
		</div>
		<div class="bottom_gap">
			<div id="staticip_add_container">
								<table>
					<tbody><tr class="table_row_add_header">
						<th><label id="add_host_label" for="add_host">Hostname</label><br><em>(optional)</em></th>
						<th><label id="add_mac_label" for="add_mac">MAC</label></th>
						<th><label id="add_ip_label" for="add_ip">IP</label></th>
						<th></th>
					</tr>
					<tr class="table_row_add">
						<td><input value="" class="" style="color: rgb(0, 0, 0);" id="add_host" size="15" type="text"></td>
						<td><input value="" class="" style="color: rgb(0, 0, 0);" id="add_mac" size="20" onkeyup="proofreadMac(this)" maxlength="17" type="text"></td>
						<td><input value="" class="" style="color: rgb(0, 0, 0);" id="add_ip" size="20" onkeyup="proofreadIp(this)" maxlength="15" type="text"></td>
						<td><input id="add_button" value="Add" class="default_button" onclick="addStatic()" type="button"></td>
					</tr>	
				</tbody></table>

			</div>
			<div>
				<select class="select_disabled" disabled="disabled" id="static_from_connected" onchange="staticFromConnected()">
					<option value="none">Select Hostname/MAC From Currently Connected Hosts</option>
				</select>
			</div>
		</div>
		
		<div id="staticip_table_heading_container">
			<span class="nocolumn">Assigned Static IP Addresses:</span>
		</div>
		<div class="indent">
			<div id="staticip_table_container" class="bottom_gap"><table style="display: none;" id="static_ip_table"><tbody><tr class="header_row"><th>Hostname</th><th>MAC</th><th>IP</th><th></th><th></th></tr></tbody></table></div>
		</div>
	</fieldset>

	<div id="firefox3_bug_correct" style="display: none;">
		<input value="firefox3_bug" type="text">
	</div>


	<div id="bottom_button_container">
		<input value="Save Changes" id="save_button" class="bottom_button" onclick="saveChanges()" type="button">
		<input value="Reset" id="reset_button" class="bottom_button" onclick="resetData()" type="button">
	</div>
</form>



<!-- <br /><textarea style="margin-left:20px;" rows=30 cols=60 id='output'></textarea> -->




<script>
<!--
	resetData();
//-->
</script>


			</div>
			<div id="main_bottom"></div>
		</div>
		<div id="nav_external_container">
			<div id="nav_top"></div>
			<div id="nav_internal_container1">
				<div id="nav_internal_container2">
					<div class="nav_internal_end1"></div>
					<div class="nav_unselected_divider_end1"></div>
					<div class="nav_unselected_end1">
						<a indepth="true" href="index.html">Status</a>
					</div>
					<div class="nav_selected_divider1"></div>
					<div class="nav_selected">
						<div class="nav_selected_container">
							<div class="selected_header">Connection</div>
							<div id="submenu_container">
								<a indepth="true" href="basic.html">Basic</a>
								<div class="submenu_selected">DHCP</div>
								<a indepth="true" href="ddns.html">Dynamic DNS</a>
								<a indepth="true" href="routing.html">Routing</a>
								<a indepth="true" href="wol.html">Wake on LAN</a>
							</div>
						</div>
					</div>
					<div class="nav_selected_divider2"></div>
					<div class="nav_unselected">
						<a indepth="true" href="port_forwarding.html">Firewall</a>
					</div>
					<div class="nav_unselected_divider"></div>
					<div class="nav_unselected">
						<a indepth="true" href="access.html">System</a>
					</div>
					<div class="nav_unselected_divider"></div>
					<div class="nav_unselected">
						<a href="logout.html">Logout</a>
					</div>
					<div class="nav_unselected_divider_end2"></div>
					<div class="nav_internal_end2"></div>
				</div>
			</div>
			<div id="nav_bottom"></div>
		</div>
	</div>
	<div id="outer_footer"></div>
</body></html>
